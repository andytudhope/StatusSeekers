const BigNumber = web3.BigNumber

const levelBoundaries = [
  '0',
  '1099511627776',
  '288230376151711744',
  '75557863725914323419136',
  '19807040628566084398385987584',
  '5192296858534827628530496329220096',
  '1361129467683753853853498429727072845824',
  '356811923176489970264571492362373784095686656',
  '93536104789177786765035829293842113257979682750464',
  '24519928653854221733733552434404946937899825954937634816',
  '6427752177035961102167848369364650410088811975131171341205504',
  '1684996666696914987166688442938726917102321526408785780068975640576',
  '441711766194596082395824375185729628956870974218904739530401550323154944',
  '115792089237316195423570985008687907853269984665640564039457584007913129639936',
]

const generateRandomInLevel = (level) => {
  const min = levelBoundaries[level]
  const maxExclusive = levelBoundaries[level + 1]
  const diff = new BigNumber(maxExclusive).sub(min)
  return diff.mul(BigNumber.random()).add(min)
}

const getEdgeCaseLevels = (level) => {
  const above = levelBoundaries[level+1]
  BigNumber.config({ EXPONENTIAL_AT: [0, 73] })
  const below = (new BigNumber(above)).sub(1).toString()
  return {above, below}
}

module.exports = {
  generateRandomInLevel,
  getEdgeCaseLevels
}
